<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Kim Ng·ªçc üíô</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(to bottom, #bae6fd, #e0f2fe, #ffffff);
  text-align: center;
  margin: 0;
  padding: 20px;
  min-height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
}

h1 {
  font-family: "Fredoka One", cursive;
  font-size: 3rem;
  color: #0369a1;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.2);
  margin-top: 40px;
  animation: bounce 1.5s infinite;
}
@keyframes bounce { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-10px); } }

.message, #dogMessage {
  max-width: 650px;
  margin: 20px auto;
  padding: 15px 20px;
  font-size: 1.1rem;
  line-height: 1.6;
  background: rgba(186,230,253,0.1);
  border: 2px solid #38bdf8;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(56,189,248,0.3);
  min-height: 100px;
  white-space: pre-wrap;
  overflow-wrap: break-word;
  opacity:0;
  transition: opacity 1s ease, transform 1s ease;
}
.message.show, #dogMessage.show { 
  opacity:1; 
  animation: heartbeat 1.5s infinite; 
}
@keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

.surprise {
  display:flex;
  flex-direction:column;
  align-items:center;
  opacity:0;
  transform:translateY(20px) scale(0.9);
  position: relative;
}
.surprise.show { opacity:1; transform:translateY(0) scale(1);}

/* ======= Surprise Box gi·ªëng messageBox ======= */
#surpriseBox p, #surpriseBox img {
  padding: 15px 20px;
  font-size: 1.1rem;
  line-height: 1.6;
  background: rgba(186,230,253,0.1);
  border: 2px solid #38bdf8;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(56,189,248,0.3);
  max-width: 650px;
  margin: 15px auto;
  white-space: pre-wrap;
  overflow-wrap: break-word;
  opacity: 0; /* ban ƒë·∫ßu ·∫©n */
  transition: opacity 1s ease, transform 1s ease;
}
#surpriseBox.show p, #surpriseBox.show img {
  opacity: 1;
  animation: heartbeat 1.5s infinite;
}

#countdownBar {
  position:absolute;
  bottom:-12px;
  left:0;
  height:14px;
  background: skyblue;
  width:100%;
  border-radius:7px;
  box-shadow: 0 0 10px skyblue;
  transition: width 0.5s ease-out;
}

button {
  margin-top: 20px;
  padding: 12px 20px;
  border:none;
  border-radius:20px;
  background:#0ea5e9;
  color:white;
  font-size:1rem;
  cursor:pointer;
  transition:0.3s, box-shadow 0.3s;
  position: relative;
  z-index: 6;
}
button:hover { background:#0284c7; box-shadow:0 0 12px rgba(0,150,255,0.6); }

.heart {
  position: fixed;
  bottom: -30px;
  font-size: 28px;
  color: #38bdf8;
  animation: rise 8s linear forwards;
  z-index:5;
}
@keyframes rise { to { transform:translateY(-120vh); opacity:0; } }

canvas { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:4; }

#musicControl {
  position: fixed;
  bottom:20px;
  right:20px;
  background:#0ea5e9;
  border:none;
  color:white;
  padding:10px 14px;
  border-radius:50%;
  cursor:pointer;
  font-size:1.2rem;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  z-index:7;
}
#musicControl:hover { background:#0284c7; }

#giftBox {
  display:none;
  width:120px;
  height:120px;
  margin:30px auto 10px;
  background:url('https://cdn-icons-png.flaticon.com/512/616/616408.png') no-repeat center/contain;
  cursor:pointer;
  z-index:7;
  position:relative;
}
@keyframes jump { 0% { transform: translateY(0) rotate(0); } 30% { transform: translateY(-40px) rotate(-10deg); } 50% { transform: translateY(0) rotate(10deg); } 70% { transform: translateY(-20px) rotate(-5deg); } 100% { transform: translateY(0) rotate(0); } }
.jump { animation: jump 0.8s ease; }

#slideshow { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:9; flex-direction: column; }
#slideshow img { max-width:80%; max-height:70%; border-radius:20px; box-shadow:0 0 20px rgba(255,255,255,0.6); }
#closeSlideshow { margin-top: 20px; padding: 10px 20px; background: #f43f5e; border: none; border-radius: 12px; color: white; cursor: pointer; font-size: 1rem; }
#closeSlideshow:hover { background: #be123c; }

#finalOverlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); color:white; font-size:2rem; justify-content:center; align-items:center; z-index:10; text-align:center; }

#surpriseCountdown { font-weight:bold; margin-left:8px; color:#fef08a; display:inline-block; animation:pulse 1s infinite; }
@keyframes pulse { 0%,100%{ transform:scale(1); } 50%{ transform:scale(1.3); } }

.confetti{border-radius:50%; pointer-events:none;}
</style>
</head>
<body>

<h1>‚òÅÔ∏è Happy Birthday to em b√© Kim Ng·ªçc üíô</h1>

<div class="controls">
  <button id="showMessageBtn">B·∫•m v√¥ em n√®ee ch·ªã Ng·ªçc uii üêï</button>
</div>
<div class="message" id="messageBox"></div>

<div class="controls" style="margin-top:14px;">
  <button id="surpriseBtn">üêïüê© T·ª•i em c√≥ b·∫•t ng·ªù cho ch·ªã Ng·ªçc n√®, ch·ªã Ng·ªçc ki√™n nh·∫´n xem h·∫øt nhee ü¶Æ üêï‚Äçü¶∫ <span id="surpriseCountdown"></span></button>
</div>

<div id="surpriseBox" class="surprise">
  <div id="countdownBar"></div>
</div>

<div id="giftBox"></div>
<div id="dogMessage"></div>

<div id="slideshow">
  <img id="slideImg" src="" alt="Slideshow">
  <button id="closeSlideshow">‚ùå ƒê√≥ng</button>
</div>

<div id="finalOverlay">
  Anh y√™u em nhi·ªÅu l·∫Øm üíô Ch√∫c m·ª´ng sinh nh·∫≠t t√¨nh y√™u c·ªßa anh üíï
</div>

<audio id="bgMusic" loop>
  <source src="https://raw.githubusercontent.com/nthong2209-jpg/birthday-web-Kngoc/main/happy-birthday-to-you-piano-version-13976.mp3" type="audio/mpeg">
</audio>
<audio id="dogBark">
  <source src="https://www.soundjay.com/animal/dog-barking-1.mp3" type="audio/mpeg">
</audio>

<canvas id="fireworks"></canvas>

<script>
// ======= L·ªùi ch√∫c =======
const messageText = `G·ª≠i em, h√¥m nay l√† ng√†y c·ªßa em, Kim Ng·ªçc, v√†o ng√†y sinh nh·∫≠t tu·ªïi m·ªõi
Kh√¥ng bi·∫øt em c√≥ c√≤n nh·ªõ hay c√≤n mu·ªën m·ªü b·ª©c th∆∞ n√†y ra ƒë·ªçc hay kh√¥ng. Nh∆∞ng n·∫øu em ƒëang ƒë·ªçc ƒë·∫øn ƒë√¢y, th√¨ anh c·∫£m ∆°n em - c·∫£m ∆°n em v√¨ ƒë√£ cho anh ƒë∆∞·ª£c hi·ªán di·ªán trong ng√†y ƒë·∫∑c bi·ªát nh·∫•t c·ªßa em d√π b·∫±ng c√°ch n√†y hay c√°ch kh√°c

Anh ch√∫c em sinh nh·∫≠t vui v·∫ª. Ch√∫c em tu·ªïi m·ªõi th·∫≠t b√¨nh an, xinh ƒë·∫πp v√† lu√¥n lu√¥n gi·ªèi giang t·ªët b·ª•ng. Anh ch√∫c em ƒë·ªß m·∫°nh m·∫Ω ƒë·ªÉ gi·ªØ l·∫•y nh·ªØng ƒëi·ªÅu x·ª©ng ƒë√°ng, ƒë·ªß tinh t∆∞·ªùng ƒë·ªÉ nh·∫≠n ra nh·ªØng ƒëi·ªÅu kh√¥ng t·ªët ƒëang ƒë·∫øn v·ªõi m√¨nh v√† ƒë·ªß d·ªãu d√†ng ƒë·ªÉ lu√¥n y√™u th∆∞∆°ng ch√≠nh em.üéÄüíô
Anh kh√¥ng r√µ sinh nh·∫≠t nƒÉm nay c·ªßa em s·∫Ω di·ªÖn ra nh∆∞ th·∫ø n√†o, s·∫Ω c√≥ bao nhi√™u ng∆∞·ªùi b√™n c·∫°nh em, s·∫Ω c√≥ bao nhi√™u ƒëi·ªÅu m√† em lu√¥n mong ƒë·ª£i x·∫£y ra. Nh∆∞ng n·∫øu c√≥ 1 ni·ªÅm tin, 1 ƒëi·ªÅu anh tin: th√¨ ƒë√≥ l√† em x·ª©ng ƒë√°ng ƒë∆∞·ª£c y√™u th∆∞∆°ng m·ªôt c√°ch ƒë·∫ßy ƒë·ªß v√† an y√™n. ƒêi·ªÅu g√¨ ƒë√£ m·ªèi h√£y c·ª© can ƒë·∫£m bu√¥ng, c√≤n ƒëi·ªÅu g√¨ c√≤n th∆∞∆°ng, h√£y c·ª© gi·ªØ l·∫•y b·∫±ng t·∫•t c·∫£ s·ª± can ƒë·∫£m c·ªßa m√¨nh, em nh√©
Anh kh√¥ng mu·ªën n√≥i nhi·ªÅu, ch·ªâ mu·ªën c·∫£m ∆°n em, c·∫£m ∆°n em v√¨ ƒë√£ t·ª´ng ·ªü l·∫°i v√†o nh·ªØng nƒÉm th√°ng kh√¥ng h·ªÅ d·ªÖ d√†ng. C·∫£m ∆°n em ƒë√£ t·ª´ng ki√™n nh·∫´n, ƒë√£ t·ª´ng d·ªãu d√†ng, ƒë√£ t·ª´ng bao dung v√† ƒë√£ t·ª´ng y√™u th∆∞∆°ng b·∫±ng ch√≠nh c·∫£ b·∫£n th√¢n em, anh th·∫≠t s·ª± c·∫£m ∆°n em, r·∫•t nhi·ªÅu.üíû

C·∫£m ∆°n em, v√¨ ƒë√£ t·ª´ng l√† nh√†, v√¨ ƒë√£ t·ª´ng l√† n∆°i ƒë·ªÉ anh v·ªÅ t√¨m ki·∫øm s·ª± d·ªãu d√†ng v√† y√™u th∆∞∆°ng t·ª´ em, anh th∆∞∆°ng em üíô
`;

// ======= Surprise boxes =======
const surprises = [
  { text: "Ng√†y n√¨ l√† ng√†y c√≥ m·ªôt c√¥ c√¥ng ch√∫a c·ª±c k√¨ gi·ªèi giang v√† xinh ƒë·∫πp ch√†o ƒë·ªùi trong v√≤ng tay ·∫•m √°p c·ªßa ba m·∫π v√† m·ªçi ng∆∞·ªùi th∆∞∆°ng y√™u üéÅüíô", img: "https://raw.githubusercontent.com/nthong2209-jpg/birthday-web-Kngoc/main/anh_hoi_nho_cua_Kngoc.jpg" },
  { text: "V√† r·ªìi, c√¥ g√°i ·∫•y c≈©ng l·ªõn l√™n v√† ƒÉn h·ªçc th√†nh t√†i, tr·ªü th√†nh m·ªôt ng∆∞·ªùi t·ªët b·ª•ng v√† gi·ªèi giang lu√¥n gi√∫p ƒë·ª° m·ªçi ng∆∞·ªùi. C√¥ g√°i ·∫•y nhi·ªÅu nƒÉm li·ªÅn ƒë·∫°t ƒë∆∞·ª£c HSG trong tr∆∞·ªùng v√† ƒë·∫∑c bi·ªát c√≤n ƒë·∫°t ƒë∆∞·ª£c gi·∫£i HSG m√¥n S·ª≠ c·∫•p th√†nh ph·ªë n·ªØa üå∏", img: "https://raw.githubusercontent.com/nthong2209-jpg/birthday-embe-KimNgoc-xinhdep/main/anh_Kngoc_hoidihoc.jpg" },
  { text: "C√¥ g√°i ·∫•y kh√¥ng nh·ªØng l√† m·ªôt ng∆∞·ªùi xinh ƒë·∫πp, gi·ªèi giang, m√† c√≤n l√† m·ªôt ng∆∞·ªùi con g√°i v√¥ c√πng d·ªÖ th∆∞∆°ng v√† hi·ªÅn d·ªãu, c√¥ ·∫•y l√† m·ªôt c√¥ g√°i c√≥ t√≠nh c√°ch d·ªÖ th∆∞∆°ng v√† r·∫•t bi·∫øt c√°ch l√†m n≈©ng tr∆∞·ªõc m·∫∑t m·ªçi ng∆∞·ªùi, th·∫≠t s·ª± ai nh√¨n th·∫•y ƒë·ªÅu kh√¥ng th·ªÉ r·ªùi m·∫Øt ƒë∆∞·ª£c üíï ", img: "https://raw.githubusercontent.com/nthong2209-jpg/birthday-embe-KimNgoc-xinhdep/main/anh_dthh_cua_Kngoc.png" },
  { text: "C√¥ ·∫•y l√† ng∆∞·ªùi con g√°i ƒë·∫ßy nƒÉng l∆∞·ª£ng t√≠ch c·ª±c, lu√¥n t·ªèa s√°ng v√† truy·ªÅn c·∫£m h·ª©ng cho m·ªçi ng∆∞·ªùi xung quanh. D·ªãu d√†ng v√† t·ª≠ t·∫ø trong t·ª´ng h√†nh ƒë·ªông, v√† tinh t·∫ø ƒë·∫øn t·ª´ng chi ti·∫øt nh·ªè, khi·∫øn ai ti·∫øp x√∫c c≈©ng c·∫£m th·∫•y ·∫•m √°p v√† an y√™n. M·ªói n·ª• c∆∞·ªùi c·ªßa c√¥ ·∫•y ƒë·ªÅu mang l·∫°i ni·ªÅm vui v√† s·ª± t∆∞∆°i m·ªõi, m·ªôt s·ª± k·∫øt h·ª£p ho√†n h·∫£o gi·ªØa l√≤ng t·ªët, s·ª± nh·∫°y b√©n v√† v·∫ª ƒë·∫πp t·ª± nhi√™n. üå∑üéá ", img: "https://raw.githubusercontent.com/nthong2209-jpg/birthday-embe-KimNgoc-xinhdep/main/anh_Kngoc_xinhdep.jpg"},
  { text: "V√† m√¨nh c≈©ng ch√∫c c√¥ g√°i n√†y c√≥ m√£i n·ª• c∆∞·ªùi tr√™n m√¥i, m√£i m√£i gi·ªØ nƒÉng l∆∞·ª£ng t√≠ch c·ª±c n√†y v√† m√£i m√£i c√≥ m·ªôt cu·ªôc s·ªëng an y√™n v√† h·∫°nh ph√∫c, Kim Ng·ªçc, em th·∫≠t s·ª± l√† m·ªôt c√¥ g√°i m√† m·ªçi ng∆∞·ªùi h·∫±ng mong ∆∞·ªõc, m√£i m√£i gi·ªØ n·ª• c∆∞·ªùi n√†y nh√©, m√£i m√£i gi·ªØ s·ª± an y√™n v√† h·∫°nh ph√∫c c·ªßa ch√≠nh em nh√©. Th∆∞∆°ng em üíô", img: "https://raw.githubusercontent.com/nthong2209-jpg/birthday-embe-KimNgoc-xinhdep/main/anh_birthday_2.jpg"},
];
let currentIndex = 0;

// ======= Slideshow =======
const slideshowImages = [
  "https://raw.githubusercontent.com/nthong2209-jpg/birthday-web-Kngoc/main/slideshow1.jpg",
  "https://raw.githubusercontent.com/nthong2209-jpg/birthday-web-Kngoc/main/slideshow2.jpg",
  "https://raw.githubusercontent.com/nthong2209-jpg/birthday-web-Kngoc/main/slideshow3.jpg"
];
let slideIndex = 0;
let slideInterval;

// ======= Typing effect =======
function typeMessage(text, element, speed=40){
  let i=0;
  element.textContent="";
  element.classList.add("show");
  const interval = setInterval(()=>{
    element.textContent += text.charAt(i);
    i++;
    if(i>=text.length) clearInterval(interval);
  }, speed);
}

// ======= Hi·ªán messageBox =======
document.getElementById("showMessageBtn").addEventListener("click", ()=>{
  typeMessage(messageText, document.getElementById("messageBox"), 40);
  document.getElementById("showMessageBtn").disabled=true;
  document.getElementById("bgMusic").play().catch(()=>{});
});

// ======= Surprise button + countdown =======
document.getElementById("surpriseBtn").addEventListener("click", ()=>{ nextSurprise(); });
function nextSurprise(){
  const box = document.getElementById("surpriseBox");
  const countdownSpan = document.getElementById("surpriseCountdown");
  const gift = document.getElementById("giftBox");
  const dogMessage = document.getElementById("dogMessage");

  if(currentIndex >= surprises.length){
    gift.style.display = "block";
    dogMessage.classList.add("show");
    typeMessage("G√¢u g√¢u üê∂! ƒê√¢y l√† h·ªôp qu√† ƒë·∫∑c bi·ªát anh d√†nh t·∫∑ng cho em, em click v√†o em ch√≥ ·ªü tr√™n ƒë·ªÉ m·ªü ra nhee, ƒë√¢y s·∫Ω ch·∫•t ch·ª©a r·∫•t r·∫•t r·∫•t nhi·ªÅu k·ªâ ni·ªám ƒë√≥ üíô", dogMessage,40);
    countdownSpan.textContent="";
    spawnConfetti();
    return;
  }

  box.classList.remove("show");
  box.innerHTML = '<div id="countdownBar"></div>';
  const barNew = document.getElementById("countdownBar");
  barNew.style.width="100%";

  const s = surprises[currentIndex];
  const p = document.createElement("p"); p.textContent = s.text;
  const img = document.createElement("img"); img.src = s.img; img.alt="Surprise";
  box.appendChild(p); box.appendChild(img);

  void box.offsetWidth;
  setTimeout(()=>{ box.classList.add("show"); }, 500);

  let countdown = 30;
  countdownSpan.textContent = countdown+"s";
  const interval = setInterval(()=>{
    countdown--;
    countdownSpan.textContent = countdown+"s";
    barNew.style.width = `${(countdown/30)*100}%`;
    if(countdown<=0){
      clearInterval(interval);
      currentIndex++;
      spawnConfetti();
      nextSurprise();
    }
  },1000);
}

// ======= Nh·∫°c n·ªÅn =======
const music = document.getElementById("bgMusic");
const musicBtn = document.createElement("button");
musicBtn.id="musicControl"; musicBtn.textContent="‚ñ∂Ô∏è"; document.body.appendChild(musicBtn);
let isPlaying=false;
musicBtn.addEventListener("click", ()=>{
  if(!isPlaying){ music.play(); musicBtn.textContent="‚è∏Ô∏è"; }
  else { music.pause(); musicBtn.textContent="‚ñ∂Ô∏è"; }
  isPlaying=!isPlaying;
});

// ======= Tr√°i tim =======
setInterval(()=>{
  const heart=document.createElement("div");
  heart.className="heart";
  const colors=["#f43f5e","#facc15","#38bdf8","#10b981","#8b5cf6","#f472b6"];
  heart.style.color=colors[Math.floor(Math.random()*colors.length)];
  heart.innerText="üíô";
  heart.style.left=Math.random()*window.innerWidth+"px";
  heart.style.fontSize=(20+Math.random()*20)+"px";
  heart.style.transform=`rotate(${Math.random()*360}deg)`;
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),8000);
},1200);

// ======= Fireworks =======
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
let particles=[];
function createFirework(x,y){
  for(let i=0;i<50;i++){ particles.push({x,y,angle:Math.random()*Math.PI*2,speed:Math.random()*5+2,alpha:1}); }
}
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach((p,i)=>{
    p.x+=Math.cos(p.angle)*p.speed;
    p.y+=Math.sin(p.angle)*p.speed;
    p.alpha-=0.01;
    ctx.fillStyle=`rgba(90,160,255,${p.alpha})`;
    ctx.beginPath(); ctx.arc(p.x,p.y,3,0,Math.PI*2); ctx.fill();
    if(p.alpha<=0)particles.splice(i,1);
  });
  requestAnimationFrame(animate);
}
animate();
setInterval(()=>createFirework(Math.random()*canvas.width,Math.random()*canvas.height*0.5),700);

// ======= Confetti =======
function spawnConfetti(){
  const confettiCount=50;
  for(let i=0;i<confettiCount;i++){
    const conf=document.createElement("div");
    conf.className="confetti";
    conf.style.position="fixed";
    conf.style.top="0px";
    conf.style.left=Math.random()*window.innerWidth+"px";
    conf.style.width="10px";
    conf.style.height="10px";
    conf.style.backgroundColor=["#f43f5e","#facc15","#38bdf8","#10b981","#8b5cf6","#f472b6"][Math.floor(Math.random()*6)];
    conf.style.opacity=Math.random();
    conf.style.transform=`rotate(${Math.random()*360}deg)`;
    conf.style.zIndex=8;
    document.body.appendChild(conf);
    let pos=0;
    const fall=setInterval(()=>{
      pos+=3+Math.random()*3;
      conf.style.top=pos+"px";
      if(pos>window.innerHeight){ clearInterval(fall); conf.remove(); }
    },16);
  }
}

// ======= Con ch√≥ + slideshow =======
const gift=document.getElementById("giftBox");
const dogAudio=document.getElementById("dogBark");
const slideshow=document.getElementById("slideshow");
const slideImg=document.getElementById("slideImg");
const finalOverlay=document.getElementById("finalOverlay");
const closeBtn=document.getElementById("closeSlideshow");

function animateSurpriseImage(img){
  img.style.transition="transform 0.5s";
  img.style.transform="scale(1.2) rotate(10deg)";
  setTimeout(()=>{ img.style.transform="scale(1) rotate(0deg)"; },500);
}

gift.addEventListener("click", ()=>{
  gift.classList.add("jump");
  setTimeout(()=>gift.classList.remove("jump"),800);
  dogAudio.currentTime=0; dogAudio.play();

  spawnConfetti();

  slideshow.style.display="flex";
  slideIndex=0;
  slideImg.src=slideshowImages[slideIndex];
  animateSurpriseImage(slideImg);
  slideInterval=setInterval(()=>{
    slideIndex=(slideIndex+1)%slideshowImages.length;
    slideImg.src=slideshowImages[slideIndex];
    animateSurpriseImage(slideImg);
  },4000);

  setTimeout(()=>{ endSlideshow(); },slideshowImages.length*4000);
});

closeBtn.addEventListener("click", ()=>{ endSlideshow(); });
function endSlideshow(){
  clearInterval(slideInterval);
  slideshow.style.display="none";
  finalOverlay.style.display="flex";
  spawnConfetti();
}
</script>
</body>
</html>
